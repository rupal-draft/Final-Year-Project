%%{init: {
  'theme': 'base',
  'themeVariables': {
    'primaryColor': '#1e40af',
    'primaryTextColor': '#ffffff',
    'primaryBorderColor': '#1d4ed8',
    'lineColor': '#374151',
    'secondaryColor': '#dbeafe',
    'tertiaryColor': '#bfdbfe',
    'background': '#ffffff'
  }
}}%%

graph TB
    %% Styling
    classDef frontend fill:#3b82f6,stroke:#1d4ed8,stroke-width:3px,color:#ffffff,font-weight:bold
    classDef api fill:#10b981,stroke:#059669,stroke-width:3px,color:#ffffff,font-weight:bold
    classDef processing fill:#f59e0b,stroke:#d97706,stroke-width:3px,color:#ffffff,font-weight:bold
    classDef data fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#ffffff,font-weight:bold
    classDef external fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#ffffff,font-weight:bold
    classDef constraint fill:#6b7280,stroke:#4b5563,stroke-width:2px,color:#ffffff,font-size:12px

    subgraph "ğŸŒ Frontend Layer"
        React["âš›ï¸ React Web Application<br/>â€¢ TypeScript<br/>â€¢ Framer Motion<br/>â€¢ Tailwind CSS"]:::frontend
        UI["ğŸ¨ UI Components<br/>â€¢ Protein Selection<br/>â€¢ Results Display<br/>â€¢ Drug Information"]:::frontend
    end

    subgraph "ğŸ”Œ API Layer"
        Flask["ğŸ Flask REST API<br/>â€¢ /api/detect-protein<br/>â€¢ /api/model-metrics<br/>â€¢ CORS & Rate Limiting"]:::api
    end

    subgraph "âš™ï¸ Processing Layer"
        Feature["ğŸ§¬ Feature Extraction<br/>â€¢ Pfeature Library<br/>â€¢ AAC, PCP, SER, SEP<br/>â€¢ < 10s processing"]:::processing
        ML["ğŸ¤– ML Prediction<br/>â€¢ PyTorch Model<br/>â€¢ Binary Classification<br/>â€¢ < 2s inference"]:::processing
        Drug["ğŸ’Š Drug Repurposing<br/>â€¢ Gemini AI Integration<br/>â€¢ Multi-API Aggregation"]:::processing
    end

    subgraph "ğŸ’¾ Data Layer"
        ProteinDB["ğŸ§¬ Protein Database<br/>â€¢ ~50,000 entries<br/>â€¢ UniProt IDs<br/>â€¢ Sequences"]:::data
        CentralityDB["ğŸ“Š Centrality Data<br/>â€¢ Network Metrics<br/>â€¢ Graph Analysis<br/>â€¢ 8 Features"]:::data
        DrugDB["ğŸ’Š Drug Mappings<br/>â€¢ ~6,000 mappings<br/>â€¢ DrugBank IDs<br/>â€¢ Protein Relations"]:::data
    end

    subgraph "ğŸŒ External Services"
        UniProt["ğŸ§¬ UniProt API<br/>â€¢ Protein Sequences<br/>â€¢ FASTA Format"]:::external
        PubChem["ğŸ§ª PubChem API<br/>â€¢ Chemical Data<br/>â€¢ Molecular Properties"]:::external
        PubMed["ğŸ“š PubMed API<br/>â€¢ Research Articles<br/>â€¢ Literature Search"]:::external
        ClinicalTrials["ğŸ¥ ClinicalTrials.gov<br/>â€¢ Trial Information<br/>â€¢ Study Data"]:::external
        Gemini["ğŸ¤– Google Gemini AI<br/>â€¢ Drug Information<br/>â€¢ Natural Language"]:::external
    end

    %% Connections
    React --> Flask
    UI --> Flask
    Flask --> Feature
    Flask --> ML
    Flask --> Drug

    Feature --> ProteinDB
    ML --> CentralityDB
    Drug --> DrugDB

    Flask --> UniProt
    Drug --> PubChem
    Drug --> PubMed
    Drug --> ClinicalTrials
    Drug --> Gemini

    %% Data Flow Styling
    linkStyle 0 stroke:#3b82f6,stroke-width:3px
    linkStyle 1 stroke:#3b82f6,stroke-width:3px
    linkStyle 2 stroke:#10b981,stroke-width:3px
    linkStyle 3 stroke:#10b981,stroke-width:3px
    linkStyle 4 stroke:#10b981,stroke-width:3px
    linkStyle 5 stroke:#f59e0b,stroke-width:2px
    linkStyle 6 stroke:#f59e0b,stroke-width:2px
    linkStyle 7 stroke:#f59e0b,stroke-width:2px
    linkStyle 8 stroke:#ef4444,stroke-width:2px
    linkStyle 9 stroke:#ef4444,stroke-width:2px
    linkStyle 10 stroke:#ef4444,stroke-width:2px
    linkStyle 11 stroke:#ef4444,stroke-width:2px
    linkStyle 12 stroke:#ef4444,stroke-width:2px
